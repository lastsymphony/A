<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Reddit Post Genshin Impact</title>
  <style>
    body { font-family: sans-serif; background: #f9f9f9; padding: 1rem; max-width: 800px; margin: auto; }
    .post { background: white; padding: 1rem; margin: 1rem 0; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .post img { width: 100%; border-radius: 6px; margin-top: 10px; }
    h2 { font-size: 18px; }
  </style>
</head>
<body>
  <h1>ðŸ“¢ Reddit Feed @genshinimpact</h1>
  <div id="feed">Memuat...</div>

  <script>
    async function loadFeed() {
      const proxy = "https://api.allorigins.win/get?url=";
      const target = encodeURIComponent("https://www.reddit.com/user/genshinimpact/.rss");
      const res = await fetch(proxy + target);
      const data = await res.json();
      const xml = new DOMParser().parseFromString(data.contents, "application/xml");

      const entries = xml.querySelectorAll("entry");
      const container = document.getElementById("feed");
      container.innerHTML = "";

      entries.forEach(entry => {
        const title = entry.querySelector("title")?.textContent;
        const link = entry.querySelector("link")?.getAttribute("href");
        const content = entry.querySelector("content")?.textContent;
        const published = entry.querySelector("published")?.textContent;

        // cari gambar
        const imgMatch = content.match(/<img[^>]+src="([^"]+)"/);
        const image = imgMatch ? imgMatch[1].replace(/&amp;/g, '&') : null;

        const post = document.createElement("div");
        post.className = "post";
        post.innerHTML = `
          <h2><a href="${link}" target="_blank">${title}</a></h2>
          ${image ? `<img src="${image}" alt="Thumbnail">` : ""}
          <p><small>ðŸ•’ ${new Date(published).toLocaleString()}</small></p>
        `;
        container.appendChild(post);
      });
    }

    loadFeed();
  </script>
</body>
</html>
